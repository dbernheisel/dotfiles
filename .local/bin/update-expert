#!/usr/bin/env zsh

set -e

cd ~/.local/bin || exit

# lowercase assignments
declare -l file
arch=$(uname -m)
if [ $arch = "x86_64" ]; then arch=amd64; fi
file="expert_$(uname)_$arch"

wget -q --show-progress "https://github.com/elixir-lang/expert/releases/download/nightly/${file}" -O "$file"
xattr -d com.apple.quarantine "${HOME}/.local/bin/${file}" &>/dev/null || true
chmod +x "${HOME}/.local/bin/${file}"

echo "Updated ${HOME}/.local/bin/${file}"
